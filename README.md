# 📘 Webアプリ仕様書・技術ドキュメント

## 1. アプリ概要

**名称:** いまバズ！

**ジャンル:** トレンド解析・リアルタイムランキングWebアプリ

**目的:** SNS/検索トレンドを横断解析し、今もっとも話題のワードと推移を可視化する

**収益モデル:** 広告収益（Google AdSense / アフィリエイト追加も可能）

---

## 2. 提供価値

* ネットの話題を**最速で把握**
* 複数ソースのトレンドを**1つの画面で確認**
* 話題の理由や盛り上がりを**データで理解**
* **リピート訪問を誘発**（広告インプレッション最大化）

---

## 3. 主要機能

### 🔥 コア機能

| 機能         | 内容                       |
| ---------- | ------------------------ |
| トップワード表示   | 1位のトレンドワードを画面中央に大きく表示    |
| トレンドランキング  | 2位〜20位などのワードを一覧表示        |
| 投稿数の推移     | 直近1時間/24時間の投稿量をグラフで表示    |
| SNSソース比率   | どのSNSで話題かを円グラフで表示        |
| 人気投稿ピックアップ | そのワードを含む投稿の要約・リンク表示      |
| AIサマリー     | 話題の理由を自動生成（一旦MVP外） |
| 自動更新       | 1分〜15分ごとにランキングを更新        |

---

## 4. 画面構成

### ダッシュボードUI構成

```
[Header]
  └ アプリ名 / 更新時刻 / ナビ

[Main Section]
  └ 今1番話題のワード（巨大テキスト）

[Trend Ranking]
  └ 2位〜20位（スクロールリスト）

[Analytics]
  ├ 投稿数推移グラフ（折れ線 / 棒）
  ├ SNSソース比率（円）
  └ 関連タグ一覧

[Popular Posts]
  └ 話題ワードを含む人気投稿リスト

[Footer]
  └ 免責 / 更新ポリシー
```

---

## 5. 広告導線設計（収益最大化）

| 広告タイプ    | 配置                        |
| -------- | ------------------------- |
| バナー広告    | Header直下、1位ワード直下、Footer直上 |
| インフィード広告 | ランキングリスト5位・10位・15位の後      |
| 記事内広告    | 詳細ページ（今後実装時）              |
| アフィリエイト  | トップワードに関連する商品リンク（任意）      |

---

## 6. 技術選定（確定）

### 🖥 フロントエンド

| 技術                      | 採用理由                         |
| ----------------------- | ---------------------------- |
| **Next.js（App Router）** | SEO（SSG）と動的UI（CSR）の両立が可能     |
| **Tailwind CSS**        | 軽量でUI構築が速く広告レイアウトも調整しやすい     |
| **Recharts**            | 分析データの可視化（投稿数推移/SNS比率）に適している |
| **Zustand**             | クライアント状態管理が軽くリアルタイム更新と相性◎    |

### 🧠 バックエンド / 解析

| 技術                               | 採用理由               |
| -------------------------------- | ------------------ |
| **Next.js API Routes（/app/api）** | MVPはフルスタックで管理がシンプル |
| **Cloudflare Workers（将来移行候補）**   | スケールが必要になった場合の移行先  |

### 💾 DB / キャッシュ（MVPでは任意）

| 技術                         | 使いどころ          |
| -------------------------- | -------------- |
| Cloudflare D1              | トレンド履歴を保存したい場合 |
| Cloudflare KV / Next Cache | 1位ワードなどの配信を高速化 |

### 🚀 デプロイ

| 技術                                     | 採用理由              |
| -------------------------------------- | ----------------- |
| **Cloudflare Pages（無料）** | 無料でNext.jsが動作 |

### 💰 収益

| 技術                 | 採用理由         |
| ------------------ | ------------ |
| **Google AdSense** | 広告収益の主軸として最適 |

---

## 7. MVPでのデータソース候補（無料優先）

* X（Twitter）トレンド（API）
* Googleトレンド
* YouTube急上昇RSS
* TikTokトレンド
* Yahooリアルタイム検索
* Instagram（インスタグラム）

---

## 8. API設計（トレンド取得の基本仕様）

### エンドポイント

```
GET  /api/trends
  →  トレンドワードランキング（1位〜20位）

GET  /api/trends/{word}
  →  ワード詳細（投稿推移/SNS比率/関連タグ/人気投稿）

GET  /api/trends/history/{word}（任意）
  →  過去の話題推移（DB導入時のみ）
```

### レスポンス例（/api/trends）

```json
{
  "updated_at": "2026-01-02T12:30:00+0900",
  "top_word": "箱根駅伝",
  "ranking": [
    "箱根駅伝",
    "OpenAI新モデル",
    "Nintendo Switch 2",
    ...
  ]
}
```

---

## 9. 非機能要件

| 要件       | 内容                      |
| -------- | ----------------------- |
| パフォーマンス  | Lighthouse 90+を目標（広告含む） |
| SEO      | 1位ワード/ランキングページはSSGで生成   |
| スケーラビリティ | キャッシュでAPI負荷を抑える設計       |
| 運用コスト    | 完全無料枠で運用可能              |

---

## 10. 免責・注意

* 本アプリは**投稿内容の保証は行わない**
* 各SNSの規約を遵守しデータを扱う
* 表示データはリアルタイム性を優先し**完全な正確性は保証しない**

---

## 11. 今後の拡張アイデア（広告収益強化）

* ワード詳細ページ追加（SEO & アフィリエイト強化）
* AIによる話題理由の高精度要約
* 週間/月間ランキングのアーカイブ生成（SEO資産化）

---

## 12. 開発フェーズ提案（広告収益まで最速ルート）

1. データソースの選定
2. `/api/trends` 実装
3. ダッシュボードUI作成
4. 広告枠埋め込み
5. デプロイ & AdSense審査
6. 分析API追加

---

## 13. セットアップ手順

### 必要な環境
- Node.js 18.0 以上
- npm または yarn

### インストール

```bash
# 依存関係をインストール
npm install

# または
yarn install
```

### 開発サーバーの起動

```bash
npm run dev

# または
yarn dev
```

ブラウザで http://localhost:3000 を開きます。

### ビルド

```bash
npm run build

# 本番サーバーの起動
npm start
```

---

## 14. プロジェクト構造

```
imabuzz/
├── app/                          # Next.js App Router
│   ├── api/
│   │   └── trends/              # トレンド API エンドポイント
│   │       ├── route.ts         # /api/trends - ランキング取得
│   │       └── [word]/
│   │           └── route.ts     # /api/trends/[word] - ワード詳細
│   ├── layout.tsx               # ルートレイアウト
│   ├── page.tsx                 # メインダッシュボード
│   └── globals.css              # グローバルスタイル
├── components/                   # React コンポーネント
│   ├── Header.tsx               # ヘッダー
│   ├── TopWordDisplay.tsx       # 1位ワード表示
│   ├── TrendRanking.tsx         # ランキング一覧
│   ├── Analytics.tsx            # グラフと分析
│   ├── PopularPosts.tsx         # 人気投稿
│   └── Footer.tsx               # フッター
├── store/                        # Zustand ストア
│   └── trendStore.ts            # トレンド状態管理
├── package.json                  # 依存関係定義
├── next.config.js               # Next.js設定
├── tsconfig.json                # TypeScript設定
└── tailwind.config.ts           # Tailwind CSS設定
```

---

## 15. 実装進行状況

### ✅ 完了
- Next.js プロジェクト初期化（App Router + TypeScript）
- UI コンポーネント実装
  - Header（更新時刻表示）
  - TopWordDisplay（1位ワード表示）
  - TrendRanking（2位〜20位ランキング）
  - Analytics（投稿推移グラフ、SNS比率）
  - PopularPosts（人気投稿ピックアップ）
  - Footer（免責事項）
- API Routes 基本構造
  - `/api/trends` - ランキング取得
  - `/api/trends/[word]` - ワード詳細
- Zustand による状態管理
- Tailwind CSS によるスタイリング
- Recharts によるグラフ表示
- 広告配置プレースホルダー

### ⏳ 次のステップ

1. **データソースの実装**
   - X（Twitter）トレンド API 連携
   - Google Trends API 連携
   - YouTube RSS フィード取得
   - その他のトレンドソース統合

2. **Google AdSense 統合**
   - バナー広告の実装
   - インフィード広告の実装
   - AdSense 審査用マークアップ

3. **データベース統合（オプション）**
   - Cloudflare D1 での履歴保存
   - トレンド推移の記録

4. **デプロイ**
   - Cloudflare Pages へのデプロイ
   - 環境変数の設定
   - AdSense 審査申請

5. **パフォーマンス最適化**
   - SSG 生成の最適化
   - キャッシュ戦略の実装
   - Lighthouse スコア向上
